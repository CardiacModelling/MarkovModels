Bootstrap: docker
From: mambaorg/micromamba

%files
./markovmodels/* /markovmodels/
./markovmodels/protocols/* /markovmodels/protocols
setup.py setup.py
README.md README.md
MANIFEST.in MANIFEST.in
scripts scripts
environment.yml environment.yml

%post
    apt update -y
    apt install git graphviz-dev gcc bash build-essential cmake gfortran -y
    micromamba env create -f environment.yml
    micromamba run -n markovmodels \
	    apt-get update \
    	    && apt-get install -y gcc g++ gfortran libgraphviz-dev \

%runscript
    micromamba run -n markovmodels "$@"
